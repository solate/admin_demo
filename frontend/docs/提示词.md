
## 提示词模板（可直接复制用于生成代码）

### 前端（Vue3 + Element Plus）

- **生成项目基础结构**
```text
你是资深前端工程师，请使用 Vite + Vue3 + TypeScript + Pinia + Vue Router + Element Plus 初始化一个管理后台工程。要求：
- 目录：src/components、src/views、src/router、src/api、src/utils、src/assets、src/styles、public
- 全局样式与主题色配置（支持暗色/亮色切换的预留）
- 配置路由懒加载与基础鉴权守卫（未登录跳转 /login）
- 封装 axios 实例：baseURL、超时、请求/响应拦截、统一错误提示
- 使用环境变量区分开发/生产 API 地址
- README 中写出启动命令
```

- **登录页生成**
```text
请实现登录页面（/login）：
- 表单项：账号（必填），密码（必填，带"查看密码"切换），验证码输入框（必填），验证码图片，登录按钮，注册按钮
- 页面加载时自动获取验证码: GET /api/admin/v1/auth/captcha
- 登录成功后保存 access_token 和 refresh_token，跳转"/"（首页）
- 使用 Element Plus 表单与校验，显示后端返回错误
- 实际 API：
  - GET /api/admin/v1/auth/captcha (获取验证码)
  - POST /api/admin/v1/auth/login (用户登录)
  - 登录请求参数: { username, password, captcha_id, captcha }
  - 登录响应: { access_token, refresh_token, user_id, user_name, phone, email }
```

- **后台布局与导航**
```text
请实现基础布局：顶部导航栏 + 左侧可折叠侧边栏 + 面包屑 + 主内容区。
- 侧边栏基于路由自动生成菜单，支持图标与激活高亮
- 面包屑基于当前路由生成
- 顶部导航包含：系统标题、用户头像下拉（个人中心/退出登录）
```

- **页面1：工厂管理（增删改查 + 搜索）**
```text
请实现"工厂管理"页面：
- 表格字段：工厂ID、工厂名称、地址、联系电话、状态、创建时间、更新时间、操作（编辑/删除）
- 顶部提供：新建按钮、关键字搜索（工厂名称）、状态筛选
- 支持分页
- 新建/编辑使用弹窗表单
- 状态：1-启用, 2-禁用
- API 约定：
  - GET /api/business/v1/factories?page=&page_size=&factory_name=&status=
  - POST /api/business/v1/factories (创建工厂)
  - GET /api/business/v1/factories/:factory_id (获取详情)
  - PUT /api/business/v1/factories/:factory_id (更新工厂)
  - DELETE /api/business/v1/factories/:factory_id (删除工厂)
- 请求/响应字段：
  - factory_id (string), factory_name (string), address (string), contact_phone (string), status (number)
```

- **页面2：商品与库存（入库/出库/展示剩余）**
```text
请实现"商品与库存"页面：
- 商品基础信息：商品名称、单位、采购价格、销售价格、当前库存、最小库存、状态、所属工厂
- 操作：新建、编辑、删除、入库、出库
- 展示实时库存数量，低于最小库存时显示警告
- 状态：1-启用, 2-禁用
- API 约定：
  - GET /api/business/v1/products?page=&page_size=&product_name=&factory_id=&status=
  - POST /api/business/v1/products (创建商品)
  - GET /api/business/v1/products/:product_id (获取详情)
  - PUT /api/business/v1/products/:product_id (更新商品)
  - DELETE /api/business/v1/products/:product_id (删除商品)
  - POST /api/business/v1/inventory/in (商品入库)
  - POST /api/business/v1/inventory/out (商品出库)
  - GET /api/business/v1/inventory/stock?product_id=&factory_id= (获取库存信息)
  - GET /api/business/v1/inventory/list?page=&page_size=&product_id=&operation_type=&operator_id=&start_time=&end_time= (库存记录列表)
- 请求/响应字段：
  - product_id (string), product_name (string), unit (string), purchase_price (string), sale_price (string)
  - current_stock (number), min_stock (number), status (number), factory_id (string)
```

- **页面3：数据统计**
```text
请实现"统计"页面（图表与指标卡片）：
- 指标卡片：
  - 商品总数 (total_products)
  - 启用商品数 (active_products)
  - 总库存数量 (total_stock)
  - 总库存价值 (total_stock_value)
  - 低库存商品数 (low_stock_products)
  - 总入库数量 (total_in_quantity)
  - 总入库金额 (total_in_amount)
  - 总出库数量 (total_out_quantity)
  - 总出库金额 (total_out_amount)
  - 总销售金额 (total_sales_amount)
  - 总销售数量 (total_sales_quantity)
- API 约定：
  - GET /api/business/v1/statistics (获取实时统计)
- 响应包含所有统计指标，金额字段为字符串类型
```

- **统一 API 封装与类型**
```text
请在 src/api 下按资源拆分文件（auth.ts、factory.ts、product.ts、inventory.ts、stats.ts），使用 TypeScript 定义请求与响应类型，所有函数返回 Promise<AxiosResponseDataType>。
```

### 后端（Go + go-zero + ent）

- **项目脚手架与模块划分**
```text
你是资深后端工程师，请使用 go-zero + ent 初始化后端：
- 目录建议：backend/app/[service]/api、internal、model、logic、svc、config、etc
- 使用 ent 生成数据模型与迁移
- 配置 JWT 鉴权中间件，/api/auth/login、/api/auth/register 放开鉴权，其余需要 Bearer Token
```

- **数据模型（ent）**
```text
请用 ent 定义以下模型并生成迁移：
- User：id, username(unique), password(hash), created_at
- Factory：id, name, address, owner, created_at
- Product：id, name, sku(unique), category, price(decimal), unit, remark, created_at
- Inventory：id, product_id(FK), quantity(int, 可为负), updated_at
- InventoryLog：id, product_id(FK), change(int, 正为入库/负为出库), remark, created_at
```

- **服务与路由（go-zero）**
```text
请实现以下 API：
- POST /api/auth/login（返回 JWT）
- GET /api/factories（分页/搜索）
- POST /api/factories、PUT /api/factories/:id、DELETE /api/factories/:id
- GET /api/products（分页/搜索）、POST /api/products、PUT /api/products/:id
- POST /api/inventory/in、POST /api/inventory/out、GET /api/inventory/:productId
- GET /api/stats/overview、GET /api/stats/trends?range=daily|weekly|monthly
```

- **业务逻辑要求**
```text
登录：校验用户名密码（BCrypt），签发 JWT；注册写入 hash 后密码。
入库/出库：写 InventoryLog，同步 Inventory.quantity；并做并发安全与事务。
统计：
- 概览统计：基于 Product、Inventory、InventoryLog 计算指标
- 趋势统计：按时间维度聚合 InventoryLog.change
```

- **配置与启动**
```text
提供 etc 配置样例（数据库、JWT 密钥、端口）。
Makefile 或 task 定义：ent 生成/迁移、服务运行。
```

### 接口契约与联调说明

```text
统一返回结构：{ code: number, message: string, data?: any }
前端在请求头附带 Authorization: Bearer <token>
约定错误码：0=成功；非0=失败。常见：401未登录、403无权限、422参数错误、500服务异常。
```

### 开发与运行命令（示例）

```text
前端：
- 安装依赖：pnpm i 或 npm i
- 开发启动：pnpm dev 或 npm run dev

后端：
- 生成 ent：go generate ./... 或 ent generate ./ent/schema
- 执行迁移：go run cmd/migrate/main.go（示例）
- 启动服务：go run main.go 或 make run
```

